import rospy
from geometry_msgs.msg import Twist
import time

def move_straight(cmd_vel_pub):
    # Créer un message Twist
    move_cmd = Twist()
    
    # Initialiser la vitesse linéaire à une valeur positive pour avancer
    move_cmd.linear.x = 0.2  # 0.2 m/s
    move_cmd.angular.z = 0.0
    
    # Publier le message pendant un certain temps pour avancer de 50 cm
    distance_to_travel = 0.5  # 50 cm
    speed = 0.2  # m/s
    time_to_travel = distance_to_travel / speed  # temps = distance / vitesse

    start_time = time.time()
    
    while time.time() - start_time < time_to_travel:
        cmd_vel_pub.publish(move_cmd)
        rospy.sleep(0.1)  # Délai pour éviter de publier trop souvent
    
    # Arrêter le robot après avoir parcouru la distance souhaitée
    move_cmd.linear.x = 0.0
    cmd_vel_pub.publish(move_cmd)
    rospy.loginfo("Robot a avancé de 50 cm")
